{"version":3,"file":"static/js/128.163f28aa.chunk.js","mappings":"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","sources":["fetchApi.jsx","pages/Lesson.styled.jsx","pages/Lesson.jsx"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = `https://api.wisey.app/api/v1`;\n\nconst setAuthHeader = token => {\n  axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n};\n\nconst getToken = async () => {\n  try {\n    const response = await axios.get('auth/anonymous?platform=subscriptions');\n    setAuthHeader(response.data.token);\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const getInfo = async () => {\n  try {\n    await getToken();\n    const response = await axios.get('/core/preview-courses', {\n      mode: 'no-cors',\n      headers: {\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n\n    return response.data.courses;\n  } catch (e) {\n    console.log(e);\n  }\n};\n\nexport const getCourseById = async id => {\n  try {\n    await getToken();\n    const response = await axios.get(`/core/preview-courses/${id}`, {\n      mode: 'no-cors',\n      headers: {\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n    return response.data;\n  } catch (e) {\n    console.log(e);\n  }\n};\n","import styled from 'styled-components';\nimport { Link } from 'react-router-dom';\n\nexport const BackBtn = styled.button`\n  outline: none;\n  background-color: lightblue;\n  border: 1px solid lightblue;\n  border-radius: 10px;\n  width: 150px;\n  height: 50px;\n  font-size: 20px;\n\n  &:hover,\n  &:focus-visible {\n    background-color: #1d89ae;\n    border: 1px solid #1d89ae;\n    color: white;\n  }\n`;\n\nexport const BackLink = styled(Link)`\n  display: block;\n  margin-top: 20px;\n  margin-bottom: 20px;\n`;\n\nexport const MainTitele = styled.p`\n  font-size: 20px;\n  font-weight: bold;\n  margin-top: 10px;\n`;\n\nexport const Wrapper = styled.div`\n  @media screen and (min-width: 1440px) {\n    display: flex;\n    gap: 50px;\n  }\n`;\n\nexport const SpeedInfo = styled.div`\n  margin-top: 5px;\n  margin-bottom: 15px;\n  font-size: 14px;\n`;\nexport const LessonsList = styled.ul`\n  @media screen and (min-width: 1440px) {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 35px;\n    justify-content: center;\n  }\n   \n\n`\nexport const LessonItem = styled.li`\n  margin-bottom: 10px;\n\n  width: 300px;\n  display: flex;\n  flex-direction: column;\n\n  border-radius: 4px;\n  box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.14),\n    0px 3px 4px 0px rgba(0, 0, 0, 0.12), 0px 1px 5px 0px rgba(0, 0, 0, 0.2);\n\n  cursor: pointer;\n`;\n\nexport const ImgThumb = styled.div`\n  height: 220px;\n  margin-bottom: 10px;\n  position: relative;\n`;\n\nexport const NoImg = styled.img`\n  width: 300px;\n  height: 155px;\n  object-fit: contain;\n`;\n\nexport const Img = styled.img`\n  position: absolute;\n  z-index: 100;\n  top: 0;\n  width: 300px;\n  object-fit: contain;\n`;\n\nexport const WatchBtn = styled.div`\n  padding: 5px;\n  margin-bottom: 10px;\n  width: 150px;\n  text-align: center;\n\n  background-color: lightblue;\n  border: 1px solid lightblue;\n\n  font-size: 18px;\n\n  &:hover,\n  &:focus-visible {\n    background-color: #1d89ae;\n    border: 1px solid #1d89ae;\n    color: white;\n  }\n`;\n\nexport const LockedBtn = styled.div`\n  padding: 5px;\n  margin-bottom: 10px;\n  width: 150px;\n  text-align: center;\n\n  background-color: #1d89ae;\n  border: 1px solid #1d89ae;\n\n  font-size: 18px;\n`;\n","import { useParams, useLocation } from 'react-router-dom';\nimport { useEffect, useState, useRef } from 'react';\nimport { getCourseById } from '../fetchApi';\n\nimport videojs from 'video.js';\nimport 'video.js/dist/video-js.css';\nimport '@videojs/themes/dist/forest/index.css';\n\nimport noImage from '../img/noImg1.jpg';\nimport {\n  BackBtn,\n  BackLink,\n  MainTitele,\n  Wrapper,\n  SpeedInfo,\n  LessonsList,\n  LessonItem,\n  ImgThumb,\n  NoImg,\n  Img,\n  WatchBtn,\n  LockedBtn,\n} from './Lesson.styled';\n\nconst CourseInfo = () => {\n  const { courseId } = useParams();\n  const location = useLocation();\n  const backLinkHref = location.state?.from || '/';\n\n  const [course, setCourse] = useState('');\n  const [lessons, setLessons] = useState([]);\n\n  const [order, setOrder] = useState(1);\n\n  const ref = useRef(null);\n\n  useEffect(() => {\n    async function getCourse() {\n      try {\n        const data = await getCourseById(courseId);\n        setCourse(data);\n\n        const sorted = data.lessons.sort((a, b) => a.order - b.order);\n        setLessons(sorted);\n        if (courseId !== localStorage.getItem('course-id')) {\n          localStorage.setItem('lesson-order', '');\n          localStorage.setItem('lesson-id', '');\n          localStorage.setItem('course-id', '');\n        }\n\n        const player = videojs(ref.current);\n        player.width(300);\n        player.height('auto');\n\n        let picture =\n          data.lessons[order].previewImageLink +\n          `/lesson-` +\n          `${order + 1}` +\n          '.webp';\n\n        player.poster(picture);\n\n        const savedTime = localStorage.getItem('videoplayer-current-time');\n        if (savedTime) {\n          player.currentTime(savedTime);\n        }\n\n        player.on(parseFloat(savedTime));\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    getCourse();\n  }, [courseId, order]);\n\n  document.addEventListener('keydown', event => {\n    const player = videojs(ref.current);\n\n    // Increase playback rate when 'f' key is pressed\n    if (event.key === 'f') {\n      const currentPlaybackRate = player.playbackRate();\n\n      player.playbackRate(currentPlaybackRate + 0.25);\n    }\n\n    // Decrease  playback rate when 's' key is pressed\n    if (event.key === 's') {\n      const currentPlaybackRate = player.playbackRate();\n      player.playbackRate(currentPlaybackRate - 0.25);\n    }\n\n    return () => {\n      document.removeEventListener('keydown');\n    };\n  });\n\n  const handleClick = () => {\n    const player = videojs(ref.current);\n    const currentTime = player.currentTime();\n    localStorage.setItem('videoplayer-current-time', currentTime);\n  };\n\n  function onChangeValue(clickOrder, lessonId) {\n    setOrder(clickOrder);\n\n    localStorage.setItem('lesson-order', clickOrder);\n    localStorage.setItem('lesson-id', lessonId);\n    localStorage.setItem('course-id', courseId);\n\n    const player = videojs(ref.current);\n\n    player.src({\n      src: lessons[clickOrder - 1].link,\n      type: 'application/x-mpegURL',\n    });\n\n    player.play();\n  }\n\n  return (\n    <div>\n      <BackLink to={backLinkHref}>\n        <BackBtn>GO BACK</BackBtn>\n      </BackLink>\n      {course ? (\n        <>\n          <MainTitele>Course title:</MainTitele>\n          <span>{course.title} </span>\n\n          <MainTitele>Description:</MainTitele>\n          {course.description}\n        </>\n      ) : (\n        ''\n      )}\n\n      <div>\n        {lessons.length ? (\n          <div>\n            <MainTitele>Lesson title:</MainTitele>\n            <span>{lessons[order - 1].title}</span>\n            <MainTitele>\n              {' '}\n              Lesson number:{' '}\n              {localStorage.getItem('lesson-order') ||\n                Number(lessons[order].order) - 1}\n            </MainTitele>\n          </div>\n        ) : (\n          ''\n        )}\n      </div>\n      {lessons.length ? (\n        <Wrapper>\n          <div>\n            <video\n              ref={ref}\n              id=\"my_video\"\n              className=\"video-js vjs-theme-forest\"\n              controls\n              preload=\"auto\"\n              data-setup='{ \"playbackRates\": [0.5, 1, 1.5, 2] }'\n              onClick={handleClick}\n            >\n              <source\n                src={\n                  lessons[localStorage.getItem('lesson-order') || order].link\n                }\n                type=\"application/x-mpegURL\"\n              />\n            </video>\n\n            <SpeedInfo>\n              <p>To increase video speed +0.25 press button k</p>\n              <p>To decrease video speed -0.25 press button s </p>\n            </SpeedInfo>\n          </div>\n          <LessonsList>\n            {lessons.map(les => {\n              return (\n                <LessonItem\n                  key={les.id}\n                  onClick={() => {\n                    onChangeValue(les.order, les.id);\n                  }}\n                >\n                  <p>{les.title}</p>\n                  <p>Lesson Number {les.order}</p>\n                  <ImgThumb>\n                    <NoImg src={noImage} alt=\"noImage\" />\n                    <Img\n                      src={\n                        les.previewImageLink + `/lesson-` + les.order + '.webp'\n                      }\n                      alt=\"lesson img\"\n                    />\n                  </ImgThumb>\n                  {les.status === 'unlocked' ? (\n                    <WatchBtn>Watch the video</WatchBtn>\n                  ) : (\n                    <LockedBtn>locked</LockedBtn>\n                  )}\n                </LessonItem>\n              );\n            })}\n          </LessonsList>\n        </Wrapper>\n      ) : (\n        ''\n      )}\n    </div>\n  );\n};\n\nexport default CourseInfo;\n"],"names":["axios","getToken","response","token","data","console","log","getInfo","mode","headers","courses","getCourseById","id","BackBtn","styled","BackLink","Link","MainTitele","Wrapper","SpeedInfo","LessonsList","LessonItem","ImgThumb","NoImg","Img","WatchBtn","LockedBtn","courseId","useParams","backLinkHref","useLocation","state","from","useState","course","setCourse","lessons","setLessons","order","setOrder","ref","useRef","useEffect","sorted","sort","a","b","localStorage","getItem","setItem","player","videojs","current","width","height","picture","previewImageLink","poster","savedTime","currentTime","on","parseFloat","getCourse","document","addEventListener","event","key","currentPlaybackRate","playbackRate","removeEventListener","to","title","description","length","Number","className","controls","preload","onClick","src","link","type","map","les","clickOrder","lessonId","play","onChangeValue","noImage","alt","status"],"sourceRoot":""}